# Oksai API

**Oksai API** æ˜¯ä¸€ä¸ªçº¯åç«¯åº”ç”¨ï¼Œä¸“æ³¨äºæä¾› REST API å’Œ GraphQL API æœåŠ¡ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®åŸºäº `examples/ever-gauzy` é¡¹ç›®çš„åç«¯ä»£ç è¿›è¡Œæå–å’Œé‡æ„ï¼Œä½¿ç”¨ Turbo æ›¿ä»£ Nx ä½œä¸ºæ„å»ºå·¥å…·ï¼Œä¸“æ³¨äºæä¾›é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„åç«¯ API æœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… çº¯åç«¯æœåŠ¡ï¼Œä¸åŒ…å«å‰ç«¯ä»£ç 
- âœ… REST API å’Œ GraphQL API åŒåè®®æ”¯æŒï¼ˆMVP é˜¶æ®µï¼‰
- âœ… ä¼ ç»Ÿä¸‰å±‚æ¶æ„ï¼ˆController-Service-Repositoryï¼‰
- âœ… CQRS æ¨¡å¼å®ç°å‘½ä»¤æŸ¥è¯¢åˆ†ç¦»
- âœ… äº‹ä»¶é©±åŠ¨æ¶æ„æ”¯æŒå¼‚æ­¥é€šä¿¡
- âœ… æ’ä»¶åŒ–æ¶æ„æ”¯æŒåŠŸèƒ½æ‰©å±•ï¼ˆå¿…éœ€åŠŸèƒ½ï¼‰
- âœ… å¤šç§Ÿæˆ·æ”¯æŒï¼ˆå¿…éœ€åŠŸèƒ½ï¼‰
- âœ… å®Œæ•´çš„è®¤è¯æˆæƒä½“ç³»

### æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶**: Node.js >= 20.0.0
- **ç¼–ç¨‹è¯­è¨€**: TypeScript ^5.7.3
- **æ¡†æ¶**: NestJS ^11.0.0
- **åŒ…ç®¡ç†**: pnpm 10.17.0
- **æ„å»ºå·¥å…·**: Turbo ^2.0.0
- **æ•°æ®åº“**: PostgreSQL >= 14.0
- **ORM**: MikroORM ^6.5.8ï¼ˆä¿ç•™ ORM æŠ½è±¡å±‚ï¼Œæœªæ¥å¯æ‰©å±• TypeORMï¼‰
- **ç¼“å­˜**: Redis >= 6.0

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 20.0.0
- pnpm >= 10.17.0
- PostgreSQL >= 14.0
- Redis >= 6.0ï¼ˆå¯é€‰ï¼Œç”¨äº Session å­˜å‚¨å’Œç¼“å­˜ï¼‰

### å®‰è£…ä¾èµ–

```bash
# å®‰è£… pnpmï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰
npm install -g pnpm@10.17.0

# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```

### ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼š

```bash
cp .env.example .env.development
```

2. æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ `.env.development` ä¸­çš„é…ç½®å€¼ï¼Œç‰¹åˆ«æ˜¯ï¼š
   - æ•°æ®åº“è¿æ¥ä¿¡æ¯
   - JWT å¯†é’¥
   - Redis è¿æ¥ä¿¡æ¯

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æˆ–ä½¿ç”¨ Turbo ç›´æ¥å¯åŠ¨
turbo run start:dev --filter=@oksai/api
```

åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### æ„å»ºé¡¹ç›®

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æ„å»ºç‰¹å®šåŒ…
turbo run build --filter=@oksai/api
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
oksai.api/
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ api/                 # API åº”ç”¨
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ main.ts      # åº”ç”¨å…¥å£
â”‚       â”‚   â””â”€â”€ app.module.ts # æ ¹æ¨¡å—
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ libs/                    # å…±äº«åº“
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¡†æ¶
â”‚   â”œâ”€â”€ auth/                # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ common/              # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ constants/           # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ contracts/           # æ¥å£å¥‘çº¦
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ tests/                   # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                 # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ package.json             # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml     # pnpm workspace é…ç½®
â”œâ”€â”€ turbo.json              # Turbo é…ç½®
â””â”€â”€ tsconfig.json           # TypeScript é…ç½®
```

## ğŸ“š æ–‡æ¡£

- [XS-001: å¯è¡Œæ€§åˆ†ææŠ¥å‘Š](./docs/XS-001-å¯è¡Œæ€§åˆ†ææŠ¥å‘Š-Turboæ›¿ä»£Nxä¸åç«¯ä»£ç æå–.md)
- [XS-002: æŠ€æœ¯è§„æ ¼æ–‡æ¡£](./docs/XS-002-æŠ€æœ¯è§„æ ¼æ–‡æ¡£.md)
- [XS-003: ever-gauzy æ¶æ„è®¾è®¡åˆ†æ](./docs/XS-003-ever-gauzyæ¶æ„è®¾è®¡åˆ†æ.md)
- [XS-004: ä»»åŠ¡è®¡åˆ’æ–‡æ¡£](./docs/XS-004-ä»»åŠ¡è®¡åˆ’æ–‡æ¡£.md)

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- **ä»£ç æ³¨é‡Š**: å¿…é¡»ä½¿ç”¨ä¸­æ–‡ï¼Œéµå¾ª TSDoc è§„èŒƒ
- **å˜é‡å‘½å**: ä½¿ç”¨è‹±æ–‡ï¼Œä½†å¿…é¡»é…æœ‰ä¸­æ–‡æ³¨é‡Šè¯´æ˜ä¸šåŠ¡è¯­ä¹‰
- **Git æäº¤**: ä½¿ç”¨è‹±æ–‡æè¿°ï¼Œéµå¾ª Conventional Commits è§„èŒƒ

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
turbo run test --filter=@oksai/api

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
turbo run test:cov --filter=@oksai/api
```

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ ESLint
pnpm lint

# è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm lint:fix

# æ£€æŸ¥ä»£ç æ ¼å¼
pnpm format:check

# è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
pnpm format
```

## ğŸ³ Docker æ”¯æŒ

```bash
# ä½¿ç”¨ Docker Compose å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f api
```

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](./CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– Pull Requestã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼ŒAPI å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚
